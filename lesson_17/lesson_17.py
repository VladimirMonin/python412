"""
Урок 17

10.12.2024

Python: Работа с файлами TXT JSON конфигурация приложений. Урок: 17

1. Основы работы с файлами:
    - Кодировки файлов (UTF-8, ASCII, CP1251)
    - Функция open() и её параметры
    - Функция close()
    - Режимы работы с файлами (r, w, a, b)
    - Контекстный менеджер with
    - Методы read(), write(), readlines()

2. Работа с различными форматами:
    - Текстовые файлы (txt)
    - JSON файлы и модуль json
    - YAML файлы и модуль PyYAML
    - CSV файлы и модуль csv
    - Сравнение форматов для хранения конфигурации

3. Создание конфигурации приложения:
    - Структура конфигурационного файла
    - Реализация конфига в YAML
    - Валидация конфигурации
    - Обработка ошибок при чтении конфига

4. Упаковка приложения с внешней конфигурацией:
    - Структура проекта с внешним конфигом
    - Настройка PyInstaller
    - Размещение конфига рядом с exe
    - Относительные пути в приложении

5. Практика:
    - Создание приложения с внешним YAML-конфигом
    - Реализация чтения/записи всех изученных форматов
    - Обработка различных кодировок
    - Сборка финального приложения с внешней конфигурацией
"""


# Открытие документа. Режимы работы с файлами
# r - чтение. Если файла нет, падаем с ошибкой
# w - запись. Если файла нет, он будет создан.
# a - добавление. Если файла нет, он будет создан.
# b - двоичный (более актуально для медиа-файлов)


# / прямо слеш - используется в Маке и Linux
# \ обратный слеш - используется в Windows r'c\nikolai\test.txt'
# \ обратный слеш - используется в Windows c\\nikolai\\test.txt
# ./ - текущая директория
# ./logs/ - текущая директория/logs
# ../ - родительская директория
# ../data/lesson_17_test.txt

TXT_FILE = r'./lesson_17/lesson_17_test.txt'

file = open(TXT_FILE, 'r', encoding='utf-8')


# Если мы пытаемся открыть то чего нет. FileNotFoundError: [Errno 2] No such file or directory: 'lesson_17_test.txt'

# Прочитаем весь файл. Read - возвращает весь документ в виде строки.
# text = file.read()
# print(type(text))
# print(text)
# print(text.split('\n'))

# Какие еще методы есть у файла?
# readline() - читает по одной строке
# readlines() - читает все строки и возвращает список строк
# read() - читает весь файл и возвращает строку

# Протестируем readline()
line1 = file.readline()
line2 = file.readline()
line3 = file.readline()
line4 = file.readline()
line5 = file.readline()

lines = [line1, line2, line3, line4, line5]
print(lines)

file.close()

# Запись в файл
# Если файла нет, он будет создан
# file = open(TXT_FILE, 'w', encoding='utf-8')

# # Записываем в файл
# file.write('Hello world!\n')

# file.close()

# Добавление в файл
file = open(TXT_FILE, 'a', encoding='utf-8')
# Записываем в файл
file.write('Hello world!')

#PRACTICE 2 функции чтение и запись(дозапись) в файл
"""
Создайте функцию чтения из txt файла.
Функция принемает строку с путем до файла.
Функция имеет параметр по умолчанию - кодировка.
Функция возвращает строку с содержимым файла.

Создайте функцию записи в txt файл.
Функция принемает строку с путем до файла, строку для записи, параметр по умолчанию - кодировка, параметр по умолчанию - режим (a или w).
Функция ничего не возвращает.

Документация и аннотация типов приветствуется :)
"""